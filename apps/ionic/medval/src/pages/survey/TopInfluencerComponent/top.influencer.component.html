<mdval-header [home]="'survey'"></mdval-header>
<ion-content padding text-center>
  <ion-fab class="circleicon" *ngIf="done" right middle>
    <button (click)="navigateToNext()" ion-fab><ion-icon name="fastforward"></ion-icon></button>
  </ion-fab>
  <ion-grid class="m-t-1" text-center>
    <ion-row text-center>
      <ion-col>
        <br/>
        <div *ngFor="let message of messages">
          <h2 style="font-size: 2em"><b>{{message | sReplacer}}</b></h2>
        </div>
        <span style="font-size: 1em">(tap to choose)</span>
      </ion-col>
    </ion-row>
    <ion-row *ngFor="let i of rows" style="padding-left:1em; margin-left:-1em">
      <ion-col  class="influencer" *ngFor="let metric of displayMetrics | slice:(i*numCols):(i+1)*numCols; let j = index;">
        <div class="row responsive-md pos-rel">
          <ion-badge *ngIf="isSelected(metric)" class="cstm-badge">{{rankedMetrics.indexOf(metric) + 1}}</ion-badge>
          <button ion-button
                  round
                  (click)="registerRank(metric)"
                  class="card-title cstm-btn"
                  [ngClass]="{'cstm-btn-pressed': isSelected(metric)}">
            {{(metric.properties[displayAttribute] ? metric.properties[displayAttribute] :  metric.properties.metricName) | sReplacer}}
          </button>
        </div>
      </ion-col>
    </ion-row>
    <ion-row text-center class="m-t-1" baseline>
      <ion-col width-80>
        <ion-item>
          <ion-label ion-text color="black" style="margin-top:0em; padding-left: 0em;font-size: 1em;" stacked>
            Or tell us in your your own words...
          </ion-label>
          <ion-textarea rows="5" class="feedback-text" placeholder="{{textPlaceholder}}" [(ngModel)]="reviewMsg">
          </ion-textarea>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row style="position: absolute; display: flex; bottom: 1em;">
      <ion-col>
        <progress-bar [progress]="progress"></progress-bar>
      </ion-col>
      <ion-col>
        <button small ion-button (click)="cancelAndRestart()">Cancel & Restart</button>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
<mdval-footer></mdval-footer>
